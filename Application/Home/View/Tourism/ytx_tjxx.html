<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>忒666</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="__PUBLIC__/xin/css/mui.min.css">
		<link rel="stylesheet" href="__PUBLIC__/xin/css/index.css" />
		<script src="__PUBLIC__/xin/js/rem.js"></script>
		<style type="text/css">
			.xxtj-right input {
				height: 0.6rem;
				margin-top: 0px;
			}
			.mui-btn-block{
				padding: 5px 0px;
			}
		</style>
	</head>

	<body>
		<include file="Include/right"/>
		<div>
			<header class="mui-bar mui-bar-nav">
				<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
				<h1 class="mui-title">信息提交</h1>
			</header>
			  <!-- 模板开始-->
			<table id="tab11" style="display: none">
	
				<tbody>
					<tr>
						<td>
							<div class="xxtj-box">
								<div class="xxtj-list flex-s">
									<div class="xxtj-left">旅客姓名</div>
									<div class="xxtj-right">
										<input type="text" name="" id="" class="guser" placeholder="请输入旅客姓名" />
									</div>
								</div>
								<div class="xxtj-list flex-s">
									<div class="xxtj-left">联系电话</div>
									<div class="xxtj-right">
										<input type="text" name="" id="" class=" gphoto " placeholder="请输入联系电话" />
									</div>
								</div>
								<div class="xxtj-list flex-s">
									<div class="xxtj-left">证件类型</div>
									<div class="xxtj-right">
										<select name="" id="" class="gselect">
											<option value="1">身份证</option>
											<option value="2">护照</option>
											<option value="3">军官证</option>
											<option value="4">回乡证</option>
											<option value="5">台胞证</option>
											<option value="6">港澳通行证</option>
											<option value="7">国际海员证</option>
											<option value="8">大陆居民往来台湾通行证</option>
											<option value="9">外国人永久居留身份证</option>
											<option value="10">其他</option>
										</select>
									</div>
								</div>
								<div class="xxtj-list flex-s">
									<div class="xxtj-left">证件号码</div>
									<div class="xxtj-right">
										<input type="text" name="" id="" class="gtot" placeholder="请输入证件号码" />
									</div>
								</div>
								
								<div class="mui-row teush-dele">
									<button type="button" id="Button1" onClick="deltr(this)" value="" class="mui-btn-block border-none mui-text-center padding-all0 margin-no"> 
								 		<span class="mui-icon mui-icon-trash"></span>删除
								 	</button>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<!--  模板结束-->
			
			<form action="{:U('Home/Tourism/lvke')}" method="post" enctype="multipart/form-data" onsubmit="return  toVaild()">
				   <input type="text" hidden id="ids" name="ids" value="{$ids}">
				     <input type="text" hidden id="str" name="str" value="{$str}">
				<div class="mui-content">
					<table id="dynamicTable" width="100%">  
						<tbody class="marginbt-20">
							<tr>
								<td>
									<div class="xxtj-box" style="margin-top: 0.8rem;">
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">姓名</div>
											<div class="xxtj-right">
												<input type="text" name="lname" id="lname" placeholder="请输入姓名" class="lxr1" />
											</div>
										</div>
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">手机号</div>
											<div class="xxtj-right">
												<input type="number" name="lphone" id="lphone" placeholder="请输入手机号码" class=" dh1" />
											</div>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="xxtj-box">
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">旅客姓名</div>
											<div class="xxtj-right">
												<input type="text" name="user" id="user" placeholder="请输入旅客姓名" class="lkxm" />
											</div>
										</div>
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">联系电话</div>
											<div class="xxtj-right">
												<input type="text" name="photo" id="photo" placeholder="请输入联系电话" class="lkdh" />
											</div>
										</div>
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">证件类型</div>
											<div class="xxtj-right">
												<select name="select" id="select">
													<option value="1">身份证</option>
													<option value="2">护照</option>
													<option value="3">军官证</option>
													<option value="4">回乡证</option>
													<option value="5">台胞证</option>
													<option value="6">港澳通行证</option>
													<option value="7">国际海员证</option>
													<option value="8">大陆居民往来台湾通行证</option>
													<option value="9">外国人永久居留身份证</option>
													<option value="10">其他</option>
												</select>
											</div>
										</div>
										<div class="xxtj-list flex-s">
											<div class="xxtj-left">证件号码</div>
											<div class="xxtj-right">
												<input type="text" name="tot" id="tot" placeholder="请输入证件号码"  class="zjhm"/>
											</div>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
	
					
				</div>
				<div class="xxtj-box">
					<div id="btn_addtr" class="xxtj-add btn-op"><img src="__PUBLIC__/xin/images/xxtj-add.png" alt="" />添加</div>
				</div>
				<button type="submit" style="margin-left: 1rem;line-height: 0.8;" class="cpxq-pl-wu_fb btn-op">提交订单</button>
			
				
			</form>
		</div>
		<script src="__PUBLIC__/xin/js/mui.min.js"></script>
		<script src="__PUBLIC__/xin/js/jquery.min.js"></script>
		<!--<script src="__PUBLIC__/xin/js/index.js"></script>-->
		<script src="__PUBLIC__/xin/js/swiper.min.js"></script>
		<script src="__PUBLIC__/xin/ckplayer/ckplayer.min.js"></script>
		<script>
			function toVaild() {
					var lxr1 = $(".lxr1").val();
					var dh1 = $(".dh1").val();
					var num = $(".lkxm").length;

					
					var tr = true;
					if(lxr1 == '') {
						alert("请输入联系人");
						return false
						tr = false
					} else if(!(/^1[3|4|5|8][0-9]\d{4,8}$/.test(dh1))) {
						alert("请输入正确的11位电话号码");
						return false
						tr = false
					}

					for(var i = 0; i < num; i++) {
						var lkxm = $(".lkxm").eq(i).val();
						var lkdh = $(".lkdh").eq(i).val();
						var zjhm = $(".zjhm").eq(i).val();
						console.log(lkdh)
						if(lkxm == '') {
							alert("请输入旅客姓名");
							return false
							tr = false
						} else if(!(/^1[3|4|5|8][0-9]\d{4,8}$/.test(lkdh))) {
							alert("请输入旅客正确的11位电话号码");
							tr = false
							return false
						} else if(zjhm == '') {
							alert("请输入证件号码");
							tr = false
							return false
						} else {
							tr = true
						}
					}
					if(tr = true) {
						return true
					}
					return false

				}
			
			
			var t = 1;
			$(function() {
				var show_count = "{$number}"; //要显示的条数
				var count = 0; //递增的开始值，这里是你的ID
				$("#btn_addtr").click(function() {

					var length = $("#dynamicTable tbody tr").length;

					if(length < show_count) //点击时候，如果当前的数字小于递增结束的条件
					{
						$("#tab11 tbody tr").find('.guser').attr('name', 'user' + t);
						$("#tab11 tbody tr").find('.gphoto').attr('name', 'photo' + t);
						$("#tab11 tbody tr").find('.gselect').attr('name', 'select' + t);
						$("#tab11 tbody tr").find('.gtot').attr('name', 'tot' + t);
						$("#tab11 tbody tr").clone().appendTo("#dynamicTable tbody");
						t++;
						changeIndex(); //更新行号
					}
				});
			});

			function changeIndex() {
				var i = 1;
				$("#dynamicTable tbody tr").each(function() { //循环tab tbody下的tr
					$(this).find("input[name='N0']").val(i++); //更新行号
				});
			}

			function deltr(opp) {
				var length = $("#dynamicTable tbody tr").length;
				//alert(length);
				if(length <= 0) {
					alert("至少保留一行");
				} else {
					$(opp).parent().parent().remove(); //移除当前行
					changeIndex();
				}
			}
		</script>

	</body>

</html>